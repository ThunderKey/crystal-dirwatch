{"repository_name":"github.com/ThunderKey/crystal-dirwatch","body":"# dirwatch\n\nTODO: Write a description here\n\nFind more in the [Documentation](https://thunderkey.github.io/crystal-dirwatch/).\n\n## Installation\n\nTODO: Write installation instructions here\n\n## Usage\n\nTODO: Write usage instructions here\n\n## Development\n\nTODO: Write development instructions here\n\n## Contributing\n\n1. Fork it ( https://github.com/ThunderKey/dirwatch/fork )\n2. Create your feature branch (git checkout -b my-new-feature)\n3. Commit your changes (git commit -am 'Add some feature')\n4. Push to the branch (git push origin my-new-feature)\n5. Create a new Pull Request\n\n## Contributors\n\n- [ThunderKey](https://github.com/ThunderKey) Nicolas Ganz - creator, maintainer\n","program":{"html_id":"github.com/ThunderKey/crystal-dirwatch/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"github.com/ThunderKey/crystal-dirwatch","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/ThunderKey/crystal-dirwatch/Dirwatch","path":"Dirwatch.html","kind":"module","full_name":"Dirwatch","name":"Dirwatch","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"dirwatch/user_friendly_exception.cr","line_number":2,"url":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/user_friendly_exception.cr"},{"filename":"dirwatch.cr","line_number":5,"url":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch.cr"},{"filename":"dirwatch/version.cr","line_number":1,"url":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/version.cr"}],"repository_name":"github.com/ThunderKey/crystal-dirwatch","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"name":"VERSION","value":"\"0.1.0\"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"A tool that watches directories and executes commands if files change","summary":"<p>A tool that watches directories and executes commands if files change</p>","class_methods":[{"id":"run-class-method","html_id":"run-class-method","name":"run","doc":"Run the dirwatcher with the configuraiton in \"dirwatch.yml\"","summary":"<p>Run the dirwatcher with the configuraiton in \"dirwatch.yml\"</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch.cr#L7","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch.cr#L7","def":{"name":"run","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  all_settings = Setting.from_file(\"dirwatch.yml\")\n  p(all_settings)\nrescue e : UserFriendlyException\n  puts(e.readable_message)\n  exit(1)\nend"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/ThunderKey/crystal-dirwatch/Dirwatch/Setting","path":"Dirwatch/Setting.html","kind":"struct","full_name":"Dirwatch::Setting","name":"Setting","abstract":false,"superclass":{"html_id":"github.com/ThunderKey/crystal-dirwatch/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"github.com/ThunderKey/crystal-dirwatch/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"github.com/ThunderKey/crystal-dirwatch/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"github.com/ThunderKey/crystal-dirwatch/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"dirwatch/setting.cr","line_number":4,"url":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr"}],"repository_name":"github.com/ThunderKey/crystal-dirwatch","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"name":"GLOBAL_DEFAULTS","value":"{\"directory\" => \".\", \"interval\" => 1}","doc":"Global defaults that are used if they are not specified.","summary":"<p>Global defaults that are used if they are not specified.</p>"}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/ThunderKey/crystal-dirwatch/Dirwatch","kind":"module","full_name":"Dirwatch","name":"Dirwatch"},"doc":"This represents a specific setting for a dirwatch task.","summary":"<p>This represents a specific setting for a dirwatch task.</p>","class_methods":[{"id":"from_file(filename)-class-method","html_id":"from_file(filename)-class-method","name":"from_file","doc":"Read the configuration of the given filename (YAML) and return a list of all settings.\n\nSee `from_yaml`.","summary":"<p>Read the configuration of the given filename (YAML) and return a list of all settings.</p>","abstract":false,"args":[{"name":"filename","doc":null,"default_value":"","external_name":"filename","restriction":""}],"args_string":"(filename)","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L14","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L14","def":{"name":"from_file","args":[{"name":"filename","doc":null,"default_value":"","external_name":"filename","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"from_yaml(File.read(filename))"}},{"id":"from_yaml(yaml_content)-class-method","html_id":"from_yaml(yaml_content)-class-method","name":"from_yaml","doc":"Read the configuration of the given YAML string and return a list of all settings.\n\nExample of a file:\n```yaml\ndefaults:\n  interval: 1\n\nmy-task-1:\n  file_match: \"*.txt\"\n  script: \"echo file changed >> txt.log\"\n\nmy-task-2:\n  interval: 5\n  directory: folder/to/csv/files\n  file_match: \"*.csv\"\n  script:\n    - \"echo CSV >> csv.log\"\n    - \"echo file changed >> csv.log\"\n```\n\nWhich will return an array like:\n```\n[\n  #<Dirwatch::Setting\n    @key=\"my-task-1\",\n    @directory=\".\",\n    @file_match=\"*.txt\",\n    @interval=2.0,\n    @scripts=[\"echo file changed >> txt.log\"]\n  >,\n  #<Dirwatch::Setting\n    @key=\"my-task-2\",\n    @directory=\"folder/to/csv/files\",\n    @file_match=\"*.csv\",\n    @interval=5.0,\n    @scripts=[\"echo CSV >> csv.log\", \"echo file changed >> csv.log\"]\n  >\n]\n```","summary":"<p>Read the configuration of the given YAML string and return a list of all settings.</p>","abstract":false,"args":[{"name":"yaml_content","doc":null,"default_value":"","external_name":"yaml_content","restriction":""}],"args_string":"(yaml_content)","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L57","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L57","def":{"name":"from_yaml","args":[{"name":"yaml_content","doc":null,"default_value":"","external_name":"yaml_content","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"puts(\"in from_yaml\")\nyaml = YAML.parse(yaml_content)\ndefaults = yaml[\"defaults\"]?\ndefaults = GLOBAL_DEFAULTS.merge(defaults ? defaults.as_h : {} of YAML::Type => YAML::Type)\nsettings = [] of Setting\nyaml.each do |k, d|\n  if k == \"defaults\"\n    next\n  end\n  data = defaults.merge(d.as_h)\n  settings << (new(k.as_s, to_string(data[\"directory\"]?, \"directory\"), to_string(data[\"file_match\"]?, \"directory\"), to_int(data[\"interval\"]?, \"interval\"), to_string_array(data[\"script\"]?, \"scripts\")))\nend\nsettings\n"}}],"constructors":[{"id":"new(key:String,directory:String,file_match:String,interval:Float64,scripts:Array(String))-class-method","html_id":"new(key:String,directory:String,file_match:String,interval:Float64,scripts:Array(String))-class-method","name":"new","doc":"Creates a new `Dirwatch::Setting` with this specific options.","summary":"<p>Creates a new <code><a href=\"../Dirwatch/Setting.html\">Dirwatch::Setting</a></code> with this specific options.</p>","abstract":false,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"directory","doc":null,"default_value":"","external_name":"directory","restriction":"String"},{"name":"file_match","doc":null,"default_value":"","external_name":"file_match","restriction":"String"},{"name":"interval","doc":null,"default_value":"","external_name":"interval","restriction":"Float64"},{"name":"scripts","doc":null,"default_value":"","external_name":"scripts","restriction":"Array(String)"}],"args_string":"(key : String, directory : String, file_match : String, interval : Float64, scripts : Array(String))","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L102","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L102","def":{"name":"new","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":"String"},{"name":"directory","doc":null,"default_value":"","external_name":"directory","restriction":"String"},{"name":"file_match","doc":null,"default_value":"","external_name":"file_match","restriction":"String"},{"name":"interval","doc":null,"default_value":"","external_name":"interval","restriction":"Float64"},{"name":"scripts","doc":null,"default_value":"","external_name":"scripts","restriction":"Array(String)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(key, directory, file_match, interval, scripts)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"directory:String-instance-method","html_id":"directory:String-instance-method","name":"directory","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L99","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L99","def":{"name":"directory","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@directory"}},{"id":"file_match:String-instance-method","html_id":"file_match:String-instance-method","name":"file_match","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L99","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L99","def":{"name":"file_match","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@file_match"}},{"id":"interval:Float64-instance-method","html_id":"interval:Float64-instance-method","name":"interval","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Float64","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L99","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L99","def":{"name":"interval","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@interval"}},{"id":"key:String-instance-method","html_id":"key:String-instance-method","name":"key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L99","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L99","def":{"name":"key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@key"}},{"id":"scripts:Array(String)-instance-method","html_id":"scripts:Array(String)-instance-method","name":"scripts","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L99","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/setting.cr#L99","def":{"name":"scripts","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@scripts"}}],"macros":[],"types":[]},{"html_id":"github.com/ThunderKey/crystal-dirwatch/Dirwatch/UserFriendlyException","path":"Dirwatch/UserFriendlyException.html","kind":"class","full_name":"Dirwatch::UserFriendlyException","name":"UserFriendlyException","abstract":false,"superclass":{"html_id":"github.com/ThunderKey/crystal-dirwatch/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"github.com/ThunderKey/crystal-dirwatch/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"github.com/ThunderKey/crystal-dirwatch/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/ThunderKey/crystal-dirwatch/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"dirwatch/user_friendly_exception.cr","line_number":2,"url":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/user_friendly_exception.cr"}],"repository_name":"github.com/ThunderKey/crystal-dirwatch","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/ThunderKey/crystal-dirwatch/Dirwatch","kind":"module","full_name":"Dirwatch","name":"Dirwatch"},"doc":"An exception with a `readable_message`, which can be given directly to the user.","summary":"<p>An exception with a <code><a href=\"../Dirwatch/UserFriendlyException.html#readable_message%3AString-instance-method\">#readable_message</a></code>, which can be given directly to the user.</p>","class_methods":[],"constructors":[{"id":"new(readable_message,cause:Exception?=nil)-class-method","html_id":"new(readable_message,cause:Exception?=nil)-class-method","name":"new","doc":"Creates a `UserFriendlyException` with a `readable_message` and an optional `cause`.","summary":"<p>Creates a <code><a href=\"../Dirwatch/UserFriendlyException.html\">UserFriendlyException</a></code> with a <code><a href=\"../Dirwatch/UserFriendlyException.html#readable_message%3AString-instance-method\">#readable_message</a></code> and an optional <code>cause</code>.</p>","abstract":false,"args":[{"name":"readable_message","doc":null,"default_value":"","external_name":"readable_message","restriction":""},{"name":"cause","doc":null,"default_value":"nil","external_name":"cause","restriction":"Exception | ::Nil"}],"args_string":"(readable_message, cause : Exception? = <span class=\"n\">nil</span>)","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/user_friendly_exception.cr#L8","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/user_friendly_exception.cr#L8","def":{"name":"new","args":[{"name":"readable_message","doc":null,"default_value":"","external_name":"readable_message","restriction":""},{"name":"cause","doc":null,"default_value":"nil","external_name":"cause","restriction":"Exception | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(readable_message, cause)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(readable_message,internal_message:String,cause:Exception?=nil)-class-method","html_id":"new(readable_message,internal_message:String,cause:Exception?=nil)-class-method","name":"new","doc":"Creates a `UserFriendlyException` with a `readable_message`, an additional `message` for internal usage and an optional `cause`.","summary":"<p>Creates a <code><a href=\"../Dirwatch/UserFriendlyException.html\">UserFriendlyException</a></code> with a <code><a href=\"../Dirwatch/UserFriendlyException.html#readable_message%3AString-instance-method\">#readable_message</a></code>, an additional <code>message</code> for internal usage and an optional <code>cause</code>.</p>","abstract":false,"args":[{"name":"readable_message","doc":null,"default_value":"","external_name":"readable_message","restriction":""},{"name":"internal_message","doc":null,"default_value":"","external_name":"internal_message","restriction":"String"},{"name":"cause","doc":null,"default_value":"nil","external_name":"cause","restriction":"Exception | ::Nil"}],"args_string":"(readable_message, internal_message : String, cause : Exception? = <span class=\"n\">nil</span>)","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/user_friendly_exception.cr#L13","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/user_friendly_exception.cr#L13","def":{"name":"new","args":[{"name":"readable_message","doc":null,"default_value":"","external_name":"readable_message","restriction":""},{"name":"internal_message","doc":null,"default_value":"","external_name":"internal_message","restriction":"String"},{"name":"cause","doc":null,"default_value":"nil","external_name":"cause","restriction":"Exception | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(readable_message, internal_message, cause)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"readable_message:String-instance-method","html_id":"readable_message:String-instance-method","name":"readable_message","doc":"The message meant for the user.","summary":"<p>The message meant for the user.</p>","abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/user_friendly_exception.cr#L4","source_link":"https://github.com/ThunderKey/crystal-dirwatch/blob/2a196275f10868c50ad222b2f44cd448d25c4982/src/dirwatch/user_friendly_exception.cr#L4","def":{"name":"readable_message","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@readable_message"}}],"macros":[],"types":[]}]}]}}